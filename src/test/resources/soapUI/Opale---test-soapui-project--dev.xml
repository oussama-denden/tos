<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="Opale - test" resourceRoot="" soapui-version="4.6.3" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://localhost:8080" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://localhost:8080</con:endpoint></con:endpoints><con:resource name="draft" path="/opale-api/draft/draft"><con:settings/><con:parameters/><con:method name="creerDraft" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:draf="http://localhost/opale-api/draft/draft">draf:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  },
  "user": "akram"
}</con:request><con:originalUri>http://localhost/opale-api/draft/draft</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="transformerEnCommande" path="/opale-api/draft/{refDraft}/transformerEnCommande"><con:settings/><con:parameters><con:parameter><con:name>refDraft</con:name><con:value>refDraft</con:value><con:style>TEMPLATE</con:style><con:default>refDraft</con:default></con:parameter></con:parameters><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:tran="http://localhost/opale-api/draft/00000017/transformerEnCommande">tran:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "trameCatalogue": {
  "frais": [
    {
      "reference": "std_cloture",
      "typeFrais": "RESILIATION",
      "montant": "50",
      "label": "Frais de cloture de dossier"
    },
    {
      "reference": "engagement_kitsat",
      "typeFrais": "CREATION",
      "montant": "50",
      "label": "Frais de dossier"
    }
  ],
  "tarifs": [
    {
      "reference": "mensuel_jet10_base",
      "engagement": "0",
      "prix": "34.9",
      "frais": [
        "std_cloture"
      ],
      "periode": "1"
    },
    {
      "reference": "annuel_jet10_base",
      "engagement": "12",
      "prix": "34.9",
      "frais": [
        "std_cloture"
      ],
      "periode": "12"
    }
  ],
  "offres": [
    {
      "reference": "jet_surf10",
      "gamme": "jet",
      "famille": "sat",
      "modeFacturation": "PREMIER_MOIS",
      "tarifs": [
        "annuel_jet10_base","mensuel_jet10_base"
      ],
      "tranches": [
        "A"
      ],
      "details": [
        {
          "referenceSelection": "kitsat",
          "label": "Trafic",
          "type": "ONLY_ONE",
          "nature": "BIEN",
          "choices": [
            {
              "reference": "trafic10g",
              "label": "Trafic 10 Gigas (Inclus)",
              "tarifs": [
                "annuel_jet10_base"
              ]
            }
          ]
        },
         {
          "referenceSelection": "jet",
          "label": "Trafic",
          "type": "ONLY_ONE",
           "nature": "BIEN",
          "choices": [
            {
              "reference": "trafic10g",
              "label": "Trafic 10 Gigas (Inclus)",
              "tarifs": [
                "annuel_jet10_base"
              ]
            }
          ]
        }
      ]
    }
  ]
},
  "clientInfo": {
     "souscripteur": {
    "clientId": "id-souscri",
    "adresseId": "adr-souscri"
  },
  "livraison":{
    "clientId": "id-livraison",
    "adresseId": "adr-livraison"
  },
  "facturation":{
    "clientId": "id-facturation",
    "adresseId": "adr-facturation"
  }
  }
}</con:request><con:originalUri>http://localhost/opale-api/draft/00000017/transformerEnCommande</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="signature" path="/opale-api/commande/{refCommande}/signature"><con:settings/><con:parameters><con:parameter><con:name>refCommande</con:name><con:value>refCommande</con:value><con:style>TEMPLATE</con:style><con:default>refCommande</con:default></con:parameter></con:parameters><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>400 405</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sig="http://localhost/opale-api/commande/00000017/signature">sig:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "mode": "OPEN_TRUST",
 "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request><con:originalUri>http://localhost/opale-api/commande/00000017/signature</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${InfosCommand_Signature#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="ajouter sinature" path="/opale-api/commande/{refCommande}/signature/{refSignature}"><con:settings/><con:parameters><con:parameter><con:name>refCommande</con:name><con:value>refCommande</con:value><con:style>TEMPLATE</con:style><con:default>refCommande</con:default></con:parameter><con:parameter><con:name>refSignature</con:name><con:value>refSignature</con:value><con:style>TEMPLATE</con:style><con:default>refSignature</con:default></con:parameter></con:parameters><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:inf="http://localhost/opale-api/commande/InfosCommand_Signature/signature/InfosCommand_Signature">inf:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "mode":  "OPEN_TRUST",
  "idSignature": "opentrust_dfr2225tr3555",
  "footprint": "e2680542f77606f42f1cb06d6849726af0c6d361da8e53678947fd394133cdcf063d02de5c8e228cdd044b0ac905063f063d1d7a134cf169d19fc684fc629f0a",
  "timestamp": 0.1,
  "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request><con:originalUri>http://localhost/opale-api/refCommande/signature/refSignature</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="refSignature" value="${InfosCommand_Signature#refSignature}"/>
  <con:entry key="refCommande" value="${InfosCommand_Signature#refCommand}"/>
</con:parameters></con:request></con:method></con:resource><con:resource name="transmettre" path="/opale-api/commande/{refCommand}/signature/transmettre"><con:settings/><con:parameters><con:parameter><con:name>refCommand</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404 500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:tran="http://localhost/opale-api/00000001/signature/transmettre">tran:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "mode":  "OPEN_TRUST",
  "idSignature": "opentrust_dfr2225tr3555",
  "footprint": "e2680542f77606f42f1cb06d6849726af0c6d361da8e53678947fd394133cdcf063d02de5c8e228cdd044b0ac905063f063d1d7a134cf169d19fc684fc629f0a",
  "timestamp": 0.1,
  "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request><con:originalUri>http://localhost/opale-api/00000001/signature/transmettre</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommand" value="${InfosCommand_Signature#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommand</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="signature" path="/opale-api/commande/00000001/signature"><con:settings/><con:parameters><con:parameter><con:name>refCommande</con:name><con:value>refCommande</con:value><con:style>TEMPLATE</con:style><con:default>refCommande</con:default></con:parameter></con:parameters><con:method name="Method 1" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:sig="http://localhost/opale-api/commande/00000001/signature">sig:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request/><con:originalUri>http://localhost/opale-api/commande/00000001/signature</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="getCommand" path="/opale-api/commande/${refCommand}"><con:settings/><con:parameters><con:parameter><con:name>refCommande</con:name><con:value>refCommande</con:value><con:style>TEMPLATE</con:style><con:default>refCommande</con:default></con:parameter></con:parameters><con:method name="Method 1" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/opale-api/commande/00000001">ns:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request/><con:originalUri>http://localhost/opale-api/commande/00000001</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="associerClient" path="/opale-api/draft/{refDraft}/associerClient"><con:settings/><con:parameters><con:parameter><con:name>refDraft</con:name><con:value>refDraft</con:value><con:style>TEMPLATE</con:style><con:default>refDraft</con:default></con:parameter></con:parameters><con:method name="Method 1" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "souscripteur": {
    "clientId": "id-souscri",
    "adresseId": "adr-souscri"
  },
  "livraison":{
    "clientId": "id-livraison",
    "adresseId": "adr-livraison"
  },
  "facturation":{
    "clientId": "id-facturation",
    "adresseId": "adr-facturation"
  },
  "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  },
    "user": "SOAP-test"
}</con:request><con:originalUri>http://localhost/opale-api/draft/00000002/associerClient</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="ligne" path="/opale-api/draft/{refDrafte}/ligne"><con:settings/><con:parameters><con:parameter><con:name>refDrafte</con:name><con:value>refDraft</con:value><con:style>TEMPLATE</con:style><con:default>refDraft</con:default></con:parameter></con:parameters><con:method name="Method 1" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:lig="http://localhost/opale-api/draft/00000002/ligne">lig:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "offre": {
    "modePaiement": "CB",
    "referenceTarif": "mensuel_jet10_base",
    "referenceOffre": "jet_surf10",
    "modeFacturation": "PREMIER_MOIS",
    "details": [
      {
        "reference": "kitsat",
        "referenceSelection": "kitsat",
        "referenceTarif": "achat_kit_mensuel",
        "modePaiement": "CB",
        "configurationJson": "",
        "dependDe": ""
      },
      {
        "reference": "jet",
        "referenceSelection": "jet",
        "referenceTarif": "achat_kit_mensuel",
        "modePaiement": "CB",
        "configurationJson": "",
        "dependDe": "kitsat"
      }
    ]
  },
  "auteur": {
    "code": "string",
    "qui": "string",
    "ip": {
      "ip": "string",
      "ts": 0.1
    },
    "canal": "string"
  },
  "user": "string"
}</con:request><con:originalUri>http://localhost/opale-api/draft//ligne</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDrafte" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refDrafte</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite name="opale-test-suite"><con:description>TestSuite generated for REST Service [http://localhost:8080]</con:description><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestSignatureProcess" searchProperties="true" id="9b1e2d7f-e507-4128-8dce-adebf9a82ddd"><con:description>TestCase generated for REST Resource [draft] located at [/opale-api/draft/draft]</con:description><con:settings/><con:testStep type="properties" name="draftInfo"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>00000007</con:value></con:property><con:property><con:name>idDraft</con:name><con:value>7</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="CreateDraft"><con:settings/><con:config service="http://localhost:8080" resourcePath="/opale-api/draft/draft" methodName="creerDraft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateDraft" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  },
  "user": "akram"
}</con:request><con:originalUri>http://localhost/opale-api/draft/draft</con:originalUri><con:assertion type="XPath Match" name="XPath Match"><con:configuration><path>declare namespace nsa='http://localhost/opale-api/draft/draft';
exists(//nsa:Response/nsa:reference)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="move reference draft"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RefDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>CreateDraft</con:sourceStep><con:sourcePath>declare namespace nsa='http://localhost/opale-api/draft/draft';
//nsa:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="DraftCreated"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://localhost:3306/opale_test?user=test&amp;password=test</con:connectionString><con:query>select * from draft 
where reference = "${draftInfo#refDraft}"</con:query><con:assertion type="Simple Contains" name="id must exists"><con:configuration><token>&lt;DRAFT.ID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XQuery Match" name="reference must much with the stored ref"><con:configuration><path>&lt;Result> { for $i in //Row return $i/DRAFT.REFERENCE/string() } &lt;/Result></path><content>${draftInfo#refDraft}</content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="move id draft"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>idDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>DraftCreated</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/DRAFT.ID</con:sourcePath><con:targetType>idDraft</con:targetType><con:targetStep>draftInfo</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Add Client"><con:settings/><con:config service="http://localhost:8080" methodName="Method 1" resourcePath="/opale-api/draft/{refDraft}/associerClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Add Client" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "souscripteur": {
    "clientId": "id-souscri",
    "adresseId": "adr-souscri"
  },
  "livraison":{
    "clientId": "id-livraison",
    "adresseId": "adr-livraison"
  },
  "facturation":{
    "clientId": "id-facturation",
    "adresseId": "adr-facturation"
  },
  "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  },
    "user": "SOAP-test"
}</con:request><con:originalUri>http://localhost/opale-api/draft//associerClient</con:originalUri><con:assertion type="GroovyScriptAssertion" name="response must be empty"><con:configuration><scriptText>assert messageExchange.hasResponse() == false</scriptText></con:configuration></con:assertion><con:assertion type="Invalid HTTP Status Codes" name="Http response must not be 500"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Client valid"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://localhost:3306/opale_test?user=test&amp;password=test</con:connectionString><con:query>select * from draft 
where reference = "${draftInfo#refDraft}"</con:query><con:assertion type="Simple Contains" name="Souscription client"><con:configuration><token>&lt;DRAFT.CLIENTSOUSCRIPTEURID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison Client"><con:configuration><token>&lt;DRAFT.CLIENTALIVRERID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Facture client"><con:configuration><token>&lt;DRAFT.CLIENTAFACTURERID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="AddLine"><con:settings/><con:config service="http://localhost:8080" methodName="Method 1" resourcePath="/opale-api/draft/{refDrafte}/ligne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="AddLine" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "offre": {
    "modePaiement": "CB",
    "referenceTarif": "mensuel_jet10_base",
    "referenceOffre": "jet_surf10",
    "modeFacturation": "PREMIER_MOIS",
    "details": [
      {
        "reference": "kitsat",
        "referenceSelection": "kitsat",
        "referenceTarif": "achat_kit_mensuel",
        "modePaiement": "CB",
        "configurationJson": "",
        "referenceChoix" :"referenceChoix",
        "dependDe": ""
      },
      {
        "reference": "jet",
        "referenceSelection": "jet",
        "referenceTarif": "achat_kit_mensuel",
        "modePaiement": "CB",
        "configurationJson": "",
        "referenceChoix" :"referenceChoix",
        "dependDe": "kitsat"
      }
    ]
  },
  "auteur": {
    "code": "string",
    "qui": "string",
    "ip": {
      "ip": "string",
      "ts": 0.1
    },
    "canal": "string"
  },
  "user": "string"
}</con:request><con:originalUri>http://localhost/opale-api/draft/00000003/ligne</con:originalUri><con:credentials><con:authType>NTLM</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="refDrafte" value="${draftInfo#refDraft}"/>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
</con:parameters><con:parameterOrder><con:entry>refDraft</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="line valid"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://localhost:3306/opale_test?user=test&amp;password=test</con:connectionString><con:query>select * from draftligne 
where  draftid  in (select id from opale_test.draft where id=${draftInfo#refDraft})</con:query><con:assertion type="XQuery Match" name="idDraft must much with stored id"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 

return &lt;result>{($x/DRAFTLIGNE.DRAFTID/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>

  &lt;result>${draftInfo#idDraft}&lt;/result>

&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="id must exists"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 

return &lt;result>{exists($x/DRAFTLIGNE.DRAFTID/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>true&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="properties" name="InfosCommand_Signature"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>00000007</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000006</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="CreateCommande"><con:settings/><con:config service="http://localhost:8080" methodName="Method 1" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCommande" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "trameCatalogue": {
  "frais": [
    {
      "reference": "std_cloture",
      "typeFrais": "RESILIATION",
      "montant": "50",
      "label": "Frais de cloture de dossier"
    },
    {
      "reference": "engagement_kitsat",
      "typeFrais": "CREATION",
      "montant": "50",
      "label": "Frais de dossier"
    }
  ],
  "tarifs": [
    {
      "reference": "mensuel_jet10_base",
      "engagement": "0",
      "prix": "34.9",
      "frais": [
        "std_cloture"
      ],
      "periode": "1"
    },
    {
      "reference": "annuel_jet10_base",
      "engagement": "12",
      "prix": "34.9",
      "frais": [
        "std_cloture"
      ],
      "periode": "12"
    }
  ],
  "offres": [
    {
      "reference": "jet_surf10",
      "gamme": "jet",
      "famille": "sat",
      "modeFacturation": "PREMIER_MOIS",
      "tarifs": [
        "annuel_jet10_base","mensuel_jet10_base"
      ],
      "tranches": [
        "A"
      ],
      "details": [
        {
          "referenceSelection": "kitsat",
          "label": "Trafic",
          "type": "ONLY_ONE",
          "nature": "BIEN",
          "choices": [
            {
              "reference": "trafic10g",
              "label": "Trafic 10 Gigas (Inclus)",
              "tarifs": [
                "annuel_jet10_base"
              ]
            }
          ]
        },
         {
          "referenceSelection": "jet",
          "label": "Trafic",
          "type": "ONLY_ONE",
           "nature": "BIEN",
          "choices": [
            {
              "reference": "trafic10g",
              "label": "Trafic 10 Gigas (Inclus)",
              "tarifs": [
                "annuel_jet10_base"
              ]
            }
          ]
        }
      ]
    }
  ]
},
  "clientInfo": {
     "souscripteur": {
    "clientId": "id-souscri",
    "adresseId": "adr-souscri"
  },
  "livraison":{
    "clientId": "id-livraison",
    "adresseId": "adr-livraison"
  },
  "facturation":{
    "clientId": "id-facturation",
    "adresseId": "adr-facturation"
  }
  }
}</con:request><con:originalUri>http://localhost/opale-api/draft/00000002/transformerEnCommande</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Invalid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>NTLM</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Move reference commande"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>CreateCommande</con:sourceStep><con:sourcePath>declare namespace nsa='http://localhost/opale-api/draft/${draftInfo#refDraft}/transformerEnCommande';
//nsa:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>InfosCommand_Signature</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getCommand"><con:settings/><con:config service="http://localhost:8080" methodName="Method 1" resourcePath="/opale-api/commande/${refCommand}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getCommand" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080</con:endpoint><con:request/><con:originalUri>http://localhost/opale-api/commande/00000003</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Invalid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>NTLM</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${InfosCommand_Signature#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="SignerCommand"><con:settings/><con:config service="http://localhost:8080" methodName="Method 1" resourcePath="/opale-api/commande/{refCommande}/signature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="SignerCommand" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "mode": "OPEN_TRUST",
 "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request><con:originalUri>http://localhost/opale-api/commande/refCommande/signature</con:originalUri><con:assertion type="XPath Match" name="signatureReference must exists"><con:configuration><path>declare namespace nsa='http://localhost/opale-api/commande/${InfosCommand_Signature#refCommand}/signature';
exists(//nsa:Response/nsa:signatureReference)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>NTLM</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${InfosCommand_Signature#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Move reference signature"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refSignature</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>SignerCommand</con:sourceStep><con:sourcePath>declare namespace nsa='http://localhost/opale-api/commande/${InfosCommand_Signature#refCommand}/signature';
//nsa:signatureReference</con:sourcePath><con:targetType>refSignature</con:targetType><con:targetStep>InfosCommand_Signature</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="SignatureValid"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://localhost:3306/opale_test?user=test&amp;password=test</con:connectionString><con:query>select * from signature 
where reference
= "${InfosCommand_Signature#refSignature}"</con:query><con:assertion type="Simple Contains" name="Mode must exists"><con:configuration><token>&lt;SIGNATURE.MODE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XQuery Match" name="mode must much with the predicting mode"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 

return &lt;result>{($x/SIGNATURE.MODE/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results> 
&lt;result>OPEN_TRUST&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="AddSignature"><con:settings/><con:config service="http://localhost:8080" methodName="Method 1" resourcePath="/opale-api/commande/{refCommande}/signature/{refSignature}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="AddSignature" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "mode":  "OPEN_TRUST",
  "idSignature": "opentrust_dfr2225tr3555",
  "footprint": "e2680542f77606f42f1cb06d6849726af0c6d361da8e53678947fd394133cdcf063d02de5c8e228cdd044b0ac905063f063d1d7a134cf169d19fc684fc629f0a",
  "timestamp": 1342456,
  "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request><con:originalUri>http://localhost/opale-api/commande/InfosCommand_Signature/signature/InfosCommand_Signature</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Invalid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="response must be empty"><con:configuration><scriptText>assert messageExchange.hasResponse() == false</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="refSignature" value="${InfosCommand_Signature#refSignature}"/>
  <con:entry key="refCommande" value="${InfosCommand_Signature#refCommand}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="SignatureComplete"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://localhost:3306/opale_test?user=test&amp;password=test</con:connectionString><con:query>select * from signature 
where reference
= "${InfosCommand_Signature#refSignature}"</con:query><con:assertion type="Simple Contains" name="timestamp must be not null"><con:configuration><token>&lt;SIGNATURE.TIMESTAMP></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="id signature must be not null"><con:configuration><token>&lt;SIGNATURE.IDSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XQuery Match" name="signature reference must much with the stored one"><con:configuration><path>&lt;Result> { for $i in //Row return $i/SIGNATURE.REFERENCE/string() } &lt;/Result></path><content>${InfosCommand_Signature#refSignature}</content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="DeleteSignature"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://localhost:3306/opale_test?user=test&amp;password=test</con:connectionString><con:query>update  commande set referenceSignature=null where 
reference ="${InfosCommand_Signature#refCommand}";</con:query><con:assertion type="JDBC Status" name="JDBC Status"/><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Create and add signature"><con:settings/><con:config service="http://localhost:8080" methodName="Method 1" resourcePath="/opale-api/commande/{refCommand}/signature/transmettre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Create and add signature" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "mode":  "OPEN_TRUST",
  "idSignature": "new_opentrust_dfr2225tr3555",
  "footprint": "e2680542f77606f42f1cb06d6849726af0c6d361da8e53678947fd394133cdcf063d02de5c8e228cdd044b0ac905063f063d1d7a134cf169d19fc684fc629f0a",
  "timestamp": 0.1,
  "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request><con:originalUri>http://localhost/opale-api/commande/00000002/signature/transmettre</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Invalid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommand" value="${InfosCommand_Signature#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="SignerCommandInvalid"><con:settings/><con:config service="http://localhost:8080" methodName="Method 1" resourcePath="/opale-api/commande/{refCommande}/signature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="SignerCommandInvalid" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080</con:endpoint><con:request>{
  "mode": "OPEN_TRUST",
 "auteur": {
    "code": "part_123456",
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request><con:originalUri>http://localhost/opale-api/commande/refCommande/signature</con:originalUri><con:assertion type="XPath Match" name="XPath Match"><con:configuration><path>declare namespace nsa='http://localhost/opale-api/commande/refCommande/signature';
(//nsa:Response/nsa:errorCode)</path><content>2.1.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="refCommande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:sensitiveInformation/></con:soapui-project>